---
title: HoloLens 1增强现实CAD模型查看软件
date: 2018-12-15 21:55:40
tags:
---

**时间： 2018年5月 - 2018年12月**
**地点： Dassault Systemes Solidworks波士顿地区eDrawings团队**
**职责： 主要开发人员**

在2016年，微软发布了第一代HoloLens, HoloLens 1。比传统的电脑设备更强大的是，用户能够在真正的三维空间里浏览事物。和虚拟现实设备相比，HoloLens能够扫描物理环境并且生成空间数据。主要的交互方式包括了头部动作，手势和可选的控制器。对CAD工业界来说，在三维空间中浏览三维模型能力是一个非常强大的工具。于是我们开始开发HoloLens 1 CAD模型查看软件。

在这项目中，我和同组的产品经理，项目经理，产品定义经理，用户体验设计师和质量测试工程师，在敏捷开发的框架指导下紧密合作，来开发这个APP。

<iframe src="//player.bilibili.com/player.html?aid=625883940&bvid=BV1Kt4y1y7cB&cid=198331202&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" title="HoloLens 1 Augmented Reality CAD Model Viewer Demo Video"> </iframe>

下面是关于APP大部分组件的简短介绍：

## 加载文件操作界面
打开APP，第一个显示的就是加载文件菜单 （在跟随模式）。 APP会显示之前加载过的模型的加载按钮。 如果之前没有同步过文件，界面将不会有模型加载按钮。用户能够点击模型加载按钮来加载模型。加载文件菜单一页最多能显示6个按钮。如果有多页按钮，上一页按钮和下一页按钮将会出现。本地/3D网盘按钮是用来从HoloLens本地存储或3D网盘云端存储同步文件之间切换。设置按钮是用来打开设置菜单。同步按钮用来打开同步菜单。

## 设置操作界面
设置菜单包含了HoloLens本地存储目标路径和一个切换开关用来打开/关闭精准放置的条件限制功能。它的初始状态时打开的。

## 同步文件操作界面
用户能够使用同步文件界面来开始从HoloLens本地存储同步模型文件。在按下同步按钮之后，APP开始从目标存储地同步文件。圆形进度条会显示同步文件的进度。一旦同步完成了，同步文件界面会显示“同步完成”标识，这样用户就能回到加载文件界面来加载模型。

## 加载文件
在用户在加载文件界面上点击了一个加载模型按钮后，APP开始加载GLTF文件，生成模型。在加载模型期间，一个在跟随模式的加载盒子会提示用户模型仍在加载。用户通过点击取消按钮，在任何时候都能够取消当前模型加载。在模型被加载成功之后，它将会在设定的桌面大小（APP设定的通用统一大小，这样用户就能很容易的控制模型）和在跟随模式。接下来，用户能够通过点击模型来初始化模型，这样模型就会退出跟随模式，位置固定，然后模型工具栏会附着在模型的包围盒上。

## 混合现实工具包包围盒
为了实现人性化的操作，APP使用的是混合现实工具包包围盒。包围盒允许用户通过手势非常容易地，无限制地移动，放大缩小和转动模型。通过这种方式，用户能够从任何角度，任何位置查看任何大小的模型。

## 模型工具栏
模型工具栏包含4个按钮：重置，放大缩小，精准放置和清除。当用户移动的时候，模型工具栏会主动地改变它的位置确保它能够面对着用户。如果工具栏附着的模型被放置了，那么他会使用存储了的地形数据来决定它的新位置，防止被空间映射网格挡住。

## 重置
重置功能会将模型放置回最初的状态，包含将模型设置成桌面大小，重新进入跟随模式。这个功能也会清除任何存储的放置数据。

## 放大缩小
能够查看在真实大小下的CAD模型的能力很重要，因此我们开发了放大缩小功能。在按下放大缩小按钮之后，选中的模型会在一定的时间内设定成真实的大小。在取消放大缩小按钮之后，选中的模型会在一定的时间内设定回桌面大小。

## 精准放置
APP支持2种精准放置模式

第一种是快速的磁性精准放置。在磁性精准放置模式，第一步，用户能够选择选中模型的一个包围盒面，然后选中的模型会跟随用户的头部注视位置，选中的包围盒面会被放置用户注视视线在空间映射网格上的焦点。


第二种是能够完成带有偏移距离放置功能的阴影精准放置。通过使用我们独一无二的阴影精准放置工具，用户能够很容易地并且高效地将选中的模型放置在目标位置加上偏移距离，同时做到让模型贴合多个表面。 在阴影精准放置工具中，当用户看向在尺子部分的刻度线时，一个绿色的滑动器会出现，它包含了显示从空间映射网格上到它本身的准确距离的文字。用户能够按下滑动器或者精准放置按钮来放置选中的模型。

APP会存储已经被精准放置的包围盒面数据，然后用来在其他模式中保持模型的放置状态。

## 清除
清除功能会删除目前的模型。

## 多个模型
APP支持多个模型操作。所有功能都支持多模型状态。

<div align="center">
<img src="https://s1.ax1x.com/2020/06/19/NuTgbT.png" width="212px" height="40px"> <img src="https://s1.ax1x.com/2020/06/19/NuTRVU.png" width="125px" height="36px">    
</div>
